/*! For license information please see 33.d06df324.js.LICENSE.txt */
(self.webpackChunkfunever_front=self.webpackChunkfunever_front||[]).push([[33],{16047:(e,t,n)=>{var i=n(93325),o=i.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=s),s.prototype=Object.create(o.prototype),r(o,s),s.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},s.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=o(e);return void 0!==t?"string"===typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},31761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(!(0<r(o,t)))break e;e[i]=t,e[n]=o,n=i}}function i(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,s=o>>>1;i<s;){var a=2*(i+1)-1,c=e[a],l=a+1,u=e[l];if(0>r(c,n))l<o&&0>r(u,c)?(e[i]=u,e[l]=n,i=l):(e[i]=c,e[a]=n,i=a);else{if(!(l<o&&0>r(u,n)))break e;e[i]=u,e[l]=n,i=l}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],d=1,h=null,f=3,y=!1,v=!1,p=!1,_="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,m="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=i(u)}}function b(e){if(p=!1,w(e),!v)if(null!==i(l))v=!0,j(R);else{var t=i(u);null!==t&&P(b,t.startTime-e)}}function R(e,n){v=!1,p&&(p=!1,g(A),A=-1),y=!0;var r=f;try{for(w(n),h=i(l);null!==h&&(!(h.expirationTime>n)||e&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(l)&&o(l),w(n)}else o(l);h=i(l)}if(null!==h)var c=!0;else{var d=i(u);null!==d&&P(b,d.startTime-n),c=!1}return c}finally{h=null,f=r,y=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var O,E=!1,S=null,A=-1,T=5,L=-1;function I(){return!(t.unstable_now()-L<T)}function C(){if(null!==S){var e=t.unstable_now();L=e;var n=!0;try{n=S(!0,e)}finally{n?O():(E=!1,S=null)}}else E=!1}if("function"===typeof m)O=function(){m(C)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,N=k.port2;k.port1.onmessage=C,O=function(){N.postMessage(null)}}else O=function(){_(C,0)};function j(e){S=e,E||(E=!0,O())}function P(e,n){A=_((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,j(R))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,r){var s=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?s+r:s:r=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>s?(e.sortIndex=r,n(u,e),null===i(l)&&e===i(u)&&(p?(g(A),A=-1):p=!0,P(b,r-s))):(e.sortIndex=a,n(l,e),v||y||(v=!0,j(R))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},75340:(e,t,n)=>{"use strict";e.exports=n(31761)},59582:(e,t,n)=>{"use strict";n.d(t,{Ne:()=>Y,fG:()=>B,RP:()=>V,u:()=>Q,O0:()=>J});var i=n(31508),o=n(40871),r=n(30653),s=n(58449),a=n(73067);const c={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class l extends Error{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,o,r]=t;super(o),this.code=i,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class u extends Error{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,o,r,s]=t;super(r),this.code=o,this.data=s,this.jsonRpcMessageId=i,this.name="SolanaMobileWalletAdapterProtocolError"}}function d(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function h(e){return t=function(e){return(0,a.d4)(e)}(e),window.btoa(t);var t}const f="solana:signTransactions",y="solana:cloneAuthorization";function v(e,t){return new Proxy({},{get:(n,i)=>(null==n[i]&&(n[i]=function(n){return d(this,void 0,void 0,(function*(){const{method:o,params:r}=function(e,t,n){let i=t,o=e.toString().replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase()))).toLowerCase();switch(e){case"authorize":{let{chain:e}=i;if("legacy"===n){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=i.cluster}i.cluster=e}else{switch(e){case"testnet":case"devnet":e="solana:".concat(e);break;case"mainnet-beta":e="solana:mainnet"}i.chain=e}}case"reauthorize":{const{auth_token:e,identity:t}=i;if(e)if("legacy"===n)o="reauthorize",i={auth_token:e,identity:t};else o="authorize";break}}return{method:o,params:i}}(i,n,e),s=yield t(o,r);return"authorize"===o&&r.sign_in_payload&&!s.sign_in_result&&(s.sign_in_result=yield function(e,t,n){var i;return d(this,void 0,void 0,(function*(){const o=null!==(i=e.domain)&&void 0!==i?i:window.location.host,r=t.accounts[0].address,s=h(Object.assign(Object.assign({},e),{domain:o,address:r}));return{address:r,signed_message:s,signature:(yield n("sign_messages",{addresses:[r],payloads:[s]})).signed_payloads[0].slice(s.length)}}))}(r.sign_in_payload,s,t)),function(e,t,n){if("getCapabilities"===e){const e=t;switch(n){case"legacy":{const t=[f];return!0===e.supports_clone_authorization&&t.push(y),Object.assign(Object.assign({},e),{features:t})}case"v1":return Object.assign(Object.assign({},e),{supports_sign_and_send_transactions:!0,supports_clone_authorization:e.features.includes(y)})}}return t}(i,s,e)}))}),n[i]),defineProperty:()=>!1,deleteProperty:()=>!1})}const p=4;const _=12,g=65;function m(e,t,n){return d(this,void 0,void 0,(function*(){const i=function(e){if(e>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(p);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}(t),o=new Uint8Array(_);crypto.getRandomValues(o);const r=yield crypto.subtle.encrypt(b(i,o),n,(new TextEncoder).encode(e)),s=new Uint8Array(i.byteLength+o.byteLength+r.byteLength);return s.set(new Uint8Array(i),0),s.set(new Uint8Array(o),i.byteLength),s.set(new Uint8Array(r),i.byteLength+o.byteLength),s}))}function w(e,t){return d(this,void 0,void 0,(function*(){const n=e.slice(0,p),i=e.slice(p,p+_),o=e.slice(p+_),r=yield crypto.subtle.decrypt(b(n,i),t,o);return function(){void 0===R&&(R=new TextDecoder("utf-8"));return R}().decode(r)}))}function b(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}let R;function O(e){if(e<49152||e>65535)throw new l(c.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,"Association port number must be between 49152 and 65535. ".concat(e," given."),{port:e});return e}const E="solana-wallet";function S(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function A(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["v1"];return d(this,void 0,void 0,(function*(){const o=O(t),r=function(e){let t="";const n=new Uint8Array(e),i=n.byteLength;for(let o=0;o<i;o++)t+=String.fromCharCode(n[o]);return window.btoa(t)}(yield crypto.subtle.exportKey("raw",e)),s=function(e,t){let n=null;if(t){try{n=new URL(t)}catch(o){}if("https:"!==(null===n||void 0===n?void 0:n.protocol))throw new l(c.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL("".concat(E,":/")));const i=e.startsWith("/")?e:[...S(n.pathname),...S(e)].join("/");return new URL(i,n)}("v1/associate/local",n);return s.searchParams.set("association",r.replace(/[/+=]/g,(e=>({"/":"_","+":"-","=":"."}[e])))),s.searchParams.set("port","".concat(o)),i.forEach((e=>{s.searchParams.set("v",e)})),s}))}const T={Firefox:0,Other:1};let L=null;function I(e,t){return d(this,void 0,void 0,(function*(){const n=O(49152+Math.floor(16384*Math.random())),i=yield A(e,n,t);if("https:"===i.protocol)window.location.assign(i);else try{const e=-1!==navigator.userAgent.indexOf("Firefox/")?T.Firefox:T.Other;switch(e){case T.Firefox:o=i,null==L&&(L=document.createElement("iframe"),L.style.display="none",document.body.appendChild(L)),L.contentWindow.location.href=o.toString();break;case T.Other:{const e=new Promise(((e,t)=>{function n(){clearTimeout(o),window.removeEventListener("blur",i)}function i(){n(),e()}window.addEventListener("blur",i);const o=setTimeout((()=>{n(),t()}),2e3)}));window.location.assign(i),yield e;break}}}catch(r){throw new l(c.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}var o;return n}))}const C={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},k="com.solana.mobilewalletadapter.v1";function N(e){return new DataView(e).getUint32(0,!1)}function j(e,t){return d(this,void 0,void 0,(function*(){!function(){if("undefined"===typeof window||!0!==window.isSecureContext)throw new l(c.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}();const n=yield function(){return d(this,void 0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])}))}(),i=yield I(n.publicKey,null===t||void 0===t?void 0:t.baseUri),o="ws://localhost:".concat(i,"/solana-wallet");let r;const s=(()=>{const e=[...C.retryDelayScheduleMs];return()=>e.length>1?e.shift():e[0]})();let a=1,h=0,f={__type:"disconnected"};return new Promise(((t,y)=>{let _;const b={},R=()=>d(this,void 0,void 0,(function*(){if("connecting"!==f.__type)return void console.warn("Expected adapter state to be `connecting` at the moment the websocket opens. "+"Got `".concat(f.__type,"`."));const{associationKeypair:e}=f;_.removeEventListener("open",R);const t=yield function(){return d(this,void 0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])}))}();_.send(yield function(e,t){return d(this,void 0,void 0,(function*(){const n=yield crypto.subtle.exportKey("raw",e),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,n),o=new Uint8Array(n.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o}))}(t.publicKey,e.privateKey)),f={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:t.privateKey}})),O=e=>{e.wasClean?f={__type:"disconnected"}:y(new l(c.ERROR_SESSION_CLOSED,"The wallet session dropped unexpectedly (".concat(e.code,": ").concat(e.reason,")."),{closeEvent:e})),A()},E=e=>d(this,void 0,void 0,(function*(){A(),Date.now()-r>=C.timeoutMs?y(new l(c.ERROR_SESSION_TIMEOUT,"Failed to connect to the wallet websocket on port ".concat(i,"."))):(yield new Promise((e=>{const t=s();T=window.setTimeout(e,t)})),L())})),S=n=>d(this,void 0,void 0,(function*(){const i=yield n.data.arrayBuffer();switch(f.__type){case"connected":try{const e=N(i.slice(0,p));if(e!==h+1)throw new Error("Encrypted message has invalid sequence number");h=e;const t=yield function(e,t){return d(this,void 0,void 0,(function*(){const n=yield w(e,t),i=JSON.parse(n);if(Object.hasOwnProperty.call(i,"error"))throw new u(i.id,i.error.code,i.error.message);return i}))}(i,f.sharedSecret),n=b[t.id];delete b[t.id],n.resolve(t.result)}catch(o){if(!(o instanceof u))throw o;{const e=b[o.jsonRpcMessageId];delete b[o.jsonRpcMessageId],e.reject(o)}}break;case"hello_req_sent":{const n=yield function(e,t,n){return d(this,void 0,void 0,(function*(){const[i,o]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,g),{name:"ECDH",namedCurve:"P-256"},!1,[])]),r=yield crypto.subtle.deriveBits({name:"ECDH",public:o},n,256),s=yield crypto.subtle.importKey("raw",r,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},s,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])}))}(i,f.associationPublicKey,f.ecdhPrivateKey),r=i.slice(g),s=0!==r.byteLength?yield(()=>d(this,void 0,void 0,(function*(){const e=N(r.slice(0,p));if(e!==h+1)throw new Error("Encrypted message has invalid sequence number");return h=e,function(e,t){return d(this,void 0,void 0,(function*(){const n=yield w(e,t),i=JSON.parse(n);let o="legacy";if(Object.hasOwnProperty.call(i,"v"))switch(i.v){case 1:case"1":case"v1":o="v1";break;case"legacy":o="legacy";break;default:throw new l(c.ERROR_INVALID_PROTOCOL_VERSION,"Unknown/unsupported protocol version: ".concat(i.v))}return{protocol_version:o}}))}(r,n)})))():{protocol_version:"legacy"};f={__type:"connected",sharedSecret:n,sessionProperties:s};const u=v(s.protocol_version,((e,t)=>d(this,void 0,void 0,(function*(){const i=a++;return _.send(yield function(e,t){return d(this,void 0,void 0,(function*(){return m(JSON.stringify(e),e.id,t)}))}({id:i,jsonrpc:"2.0",method:e,params:null!==t&&void 0!==t?t:{}},n)),new Promise(((t,n)=>{b[i]={resolve(i){switch(e){case"authorize":case"reauthorize":{const{wallet_uri_base:e}=i;if(null!=e)try{!function(e){let t;try{t=new URL(e)}catch(n){throw new l(c.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new l(c.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}(e)}catch(o){return void n(o)}break}}t(i)},reject:n}}))}))));try{t(yield e(u))}catch(o){y(o)}finally{A(),_.close()}break}}}));let A,T;const L=()=>{A&&A(),f={__type:"connecting",associationKeypair:n},void 0===r&&(r=Date.now()),_=new WebSocket(o,[k]),_.addEventListener("open",R),_.addEventListener("close",O),_.addEventListener("error",E),_.addEventListener("message",S),A=()=>{window.clearTimeout(T),_.removeEventListener("open",R),_.removeEventListener("close",O),_.removeEventListener("error",E),_.removeEventListener("message",S)}};L()}))}))}var P=n(70689);function z(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}function U(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function x(e){return window.btoa(String.fromCharCode.call(null,...e))}function M(e){return new Uint8Array(window.atob(e).split("").map((e=>e.charCodeAt(0))))}function D(e){return x("version"in e?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}function W(e){const t=e[0]*s.SIGNATURE_LENGTH_IN_BYTES+1;return"legacy"===s.VersionedMessage.deserializeMessageVersion(e.slice(t,e.length))?s.Transaction.from(e):s.VersionedTransaction.deserialize(e)}function K(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function F(e){return new Uint8Array(window.atob(e).split("").map((e=>e.charCodeAt(0))))}const B="Mobile Wallet Adapter";function G(e){return"version"in e}class Y extends i.Xl{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=B,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState="undefined"!==typeof window&&window.isSecureContext&&"undefined"!==typeof document&&/android/i.test(navigator.userAgent)?o.Ok.Loadable:o.Ok.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=null!==(t=e.chain)&&void 0!==t?t:e.cluster,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==o.Ok.Unsupported&&this._authorizationResultCache.get().then((e=>{e&&this.declareWalletAsInstalled()}))}get publicKey(){if(null==this._publicKey&&null!=this._selectedAddress)try{this._publicKey=function(e){const t=F(e);return new s.PublicKey(t)}(this._selectedAddress)}catch(e){throw new r.Kd(e instanceof Error&&(null===e||void 0===e?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==o.Ok.Installed&&this.emit("readyStateChange",this._readyState=o.Ok.Installed)}runWithGuard(e){return K(this,void 0,void 0,(function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}}))}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return K(this,void 0,void 0,(function*(){return yield this.autoConnect()}))}autoConnect(){return K(this,void 0,void 0,(function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){if(this._readyState!==o.Ok.Installed&&this._readyState!==o.Ok.Loadable)throw new r.AE;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new r.Y6(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}connect(){return K(this,void 0,void 0,(function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){if(this._readyState!==o.Ok.Installed&&this._readyState!==o.Ok.Loadable)throw new r.AE;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new r.Y6(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}performAuthorization(e){return K(this,void 0,void 0,(function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact((t=>K(this,void 0,void 0,(function*(){const n=yield t.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)]),n}))))}catch(t){throw new r.Y6(t instanceof Error&&t.message||"Unknown error",t)}}))}handleAuthorizationResult(e){var t;return K(this,void 0,void 0,(function*(){const n=null==this._authorizationResult||(null===(t=this._authorizationResult)||void 0===t?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some(((t,n)=>t.address!==e.accounts[n].address));if(this._authorizationResult=e,this.declareWalletAsInstalled(),n){const t=yield this._addressSelector.select(e.accounts.map((e=>{let{address:t}=e;return t})));t!==this._selectedAddress&&(this._selectedAddress=t,delete this._publicKey,this.emit("connect",this.publicKey))}}))}performReauthorization(e,t){return K(this,void 0,void 0,(function*(){try{const n=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(n){throw this.disconnect(),new r.PQ(n instanceof Error&&(null===n||void 0===n?void 0:n.message)||"Unknown error",n)}}))}disconnect(){return K(this,void 0,void 0,(function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")}))}transact(e){var t;return K(this,void 0,void 0,(function*(){const n=null===(t=this._authorizationResult)||void 0===t?void 0:t.wallet_uri_base,i=n?{baseUri:n}:void 0,o=this._connectionGeneration;try{return yield function(e,t){return U(this,void 0,void 0,(function*(){return yield j((t=>{const n=new Proxy({},{get(e,n){if(null==e[n])switch(n){case"signAndSendTransactions":e[n]=function(e){var{minContextSlot:n,commitment:i,skipPreflight:o,maxRetries:r,waitForCommitmentToSendNextTransaction:s,transactions:a}=e,c=z(e,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return U(this,void 0,void 0,(function*(){const e=a.map(D),l={min_context_slot:n,commitment:i,skip_preflight:o,max_retries:r,wait_for_commitment_to_send_next_transaction:s},{signatures:u}=yield t.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},c),Object.values(l).some((e=>null!=e))?{options:l}:null),{payloads:e}));return u.map(M).map(P.encode)}))};break;case"signMessages":e[n]=function(e){var{payloads:n}=e,i=z(e,["payloads"]);return U(this,void 0,void 0,(function*(){const e=n.map(x),{signed_payloads:o}=yield t.signMessages(Object.assign(Object.assign({},i),{payloads:e}));return o.map(M)}))};break;case"signTransactions":e[n]=function(e){var{transactions:n}=e,i=z(e,["transactions"]);return U(this,void 0,void 0,(function*(){const e=n.map(D),{signed_payloads:o}=yield t.signTransactions(Object.assign(Object.assign({},i),{payloads:e}));return o.map(M).map(W)}))};break;default:e[n]=t[n]}return e[n]},defineProperty:()=>!1,deleteProperty:()=>!1});return e(n)}),t)}))}(e,i)}catch(r){throw this._connectionGeneration!==o&&(yield new Promise((()=>{}))),r instanceof Error&&"SolanaMobileWalletAdapterError"===r.name&&"ERROR_WALLET_NOT_FOUND"===r.code&&(yield this._onWalletNotFound(this)),r}}))}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new r.kW;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return K(this,void 0,void 0,(function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact((n=>K(this,void 0,void 0,(function*(){yield this.performReauthorization(n,t);return yield n.signTransactions({transactions:e})}))))}catch(n){throw new r.z4(null===n||void 0===n?void 0:n.message,n)}}))}sendTransaction(e,t,n){return K(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){const{authToken:i}=this.assertIsAuthorized(),o=null===n||void 0===n?void 0:n.minContextSlot;try{return yield this.transact((r=>K(this,void 0,void 0,(function*(){function s(){let e,i;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null===n||void 0===n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":i=n.preflightCommitment;break;case void 0:i=e;break;default:i="finalized"}return("finalized"===i?2:"confirmed"===i?1:0)<("finalized"===e?2:"confirmed"===e?1:0)?i:e}const[a,c,l]=yield Promise.all([r.getCapabilities(),this.performReauthorization(r,i),G(e)?null:(()=>K(this,void 0,void 0,(function*(){var n;if(e.feePayer||(e.feePayer=null!==(n=this.publicKey)&&void 0!==n?n:void 0),null==e.recentBlockhash){const{blockhash:n}=yield t.getLatestBlockhash({commitment:s()});e.recentBlockhash=n}})))()]);if(a.supports_sign_and_send_transactions){return(yield r.signAndSendTransactions({minContextSlot:o,transactions:[e]}))[0]}{const[i]=yield r.signTransactions({transactions:[e]});if(G(i))return yield t.sendTransaction(i);{const e=i.serialize();return yield t.sendRawTransaction(e,Object.assign(Object.assign({},n),{preflightCommitment:s()}))}}}))))}catch(s){throw new r.UF(null===s||void 0===s?void 0:s.message,s)}}))))}))}signTransaction(e){return K(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){const[t]=yield this.performSignTransactions([e]);return t}))))}))}signAllTransactions(e){return K(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){return yield this.performSignTransactions(e)}))))}))}signMessage(e){return K(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){const{authToken:t,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact((i=>K(this,void 0,void 0,(function*(){yield this.performReauthorization(i,t);const[o]=yield i.signMessages({addresses:[n],payloads:[e]});return o.slice(-64)}))))}catch(i){throw new r.K3(null===i||void 0===i?void 0:i.message,i)}}))))}))}signIn(e){return K(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>K(this,void 0,void 0,(function*(){var t,n;if(this._readyState!==o.Ok.Installed&&this._readyState!==o.Ok.Loadable)throw new r.AE;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address;return{account:Object.assign(Object.assign({},null!==(n=i.accounts.find((e=>e.address==o)))&&void 0!==n?n:{address:o}),{publicKey:F(o)}),signedMessage:F(i.sign_in_result.signed_message),signature:F(i.sign_in_result.signature)}}catch(i){throw new r.Y6(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))))}))}}function V(){return{select(e){return K(this,void 0,void 0,(function*(){return e[0]}))}}}const H="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Q(){let e;try{e=window.localStorage}catch(t){}return{clear(){return K(this,void 0,void 0,(function*(){if(e)try{e.removeItem(H)}catch(t){}}))},get(){return K(this,void 0,void 0,(function*(){if(e)try{return JSON.parse(e.getItem(H))||void 0}catch(t){}}))},set(n){return K(this,void 0,void 0,(function*(){if(e)try{e.setItem(H,JSON.stringify(n))}catch(t){}}))}}}function Z(e){return K(this,void 0,void 0,(function*(){"undefined"!==typeof window&&window.location.assign(e.url)}))}function J(){return Z}}}]);